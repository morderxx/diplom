<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ß–∞—Ç</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* --- –°—Ç–∏–ª–∏ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –∏ –º–µ–Ω—é --- */
    .sidebar {
      width: 250px;
      background: #f5f5f5;
      display: flex;
      flex-direction: column;
      border-right: 1px solid #ddd;
    }
    .menu-tabs {
      display: flex;
      border-bottom: 1px solid #ccc;
    }
    .menu-tabs .tab {
      flex: 1;
      padding: 10px;
      background: none;
      border: none;
      cursor: pointer;
      text-align: center;
      font-weight: bold;
    }
    .menu-tabs .tab.active {
      background: #fff;
      border-bottom: 2px solid #007bff;
    }
    .menu-content {
      position: relative;
      flex: 1;
      overflow: hidden;
    }
    .menu-content > .section {
      display: none;
      padding: 10px;
    }
    .menu-content > .section.active {
      display: block;
    }
    /* –ø–æ–¥–≥–æ–Ω—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫ */
    .rooms-list { list-style: none; padding: 0; margin: 0; }
    .rooms-list li { padding: 5px; cursor: pointer; }
    .rooms-list li:hover { background: #e0e0e0; }
  </style>
</head>
<body>
  <div class="chat-wrapper" style="display: flex; height: 100vh;">
    <!-- –ù–æ–≤–∞—è –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <aside class="sidebar">
      <nav class="menu-tabs">
        <button data-section="chats" class="tab active">–ß–∞—Ç—ã</button>
        <button data-section="groups" class="tab">–ì—Ä—É–ø–ø—ã</button>
        <button data-section="channels" class="tab">–ö–∞–Ω–∞–ª—ã</button>
        <button data-section="games" class="tab">–ò–≥—Ä—ã</button>
        <button data-section="miniapps" class="tab">–ú–∏–Ω–∏‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</button>
      </nav>
      <div class="menu-content">
        <div id="section-chats" class="section active">
          <div class="current-user">–í—ã: <span id="current-user"></span></div>
          <h2>–ß–∞—Ç—ã</h2>
          <ul id="rooms-list" class="rooms-list"></ul>
        </div>
        <div id="section-groups" class="section">
          <h2>–ì—Ä—É–ø–ø—ã</h2>
          <ul id="groups-list" class="rooms-list"></ul>
        </div>
        <div id="section-channels" class="section">
          <h2>–ö–∞–Ω–∞–ª—ã</h2>
          <ul id="channels-list" class="rooms-list"></ul>
        </div>
        <div id="section-games" class="section">
          <h2>–ò–≥—Ä—ã</h2>
          <ul id="games-list" class="rooms-list"></ul>
        </div>
        <div id="section-miniapps" class="section">
          <h2>–ú–∏–Ω–∏‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h2>
          <ul id="miniapps-list" class="rooms-list"></ul>
        </div>
      </div>
    </aside>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —á–∞—Ç–∞ -->
    <section id="chat-section" class="chat-container" style="flex:1; display:flex; flex-direction:column;">
      <div class="chat-message-area" style="flex:1; display:flex; flex-direction:column;">
        <!-- —à–∞–ø–∫–∞ -->
        <div id="chat-header" class="chat-header" style="display:flex; justify-content:space-between; padding:10px; border-bottom:1px solid #ccc;">
          <div class="chat-header__left">
            –°–æ–±–µ—Å–µ–¥–Ω–∏–∫: <span id="chat-peer"></span>
          </div>
          <button id="call-btn" class="icon-btn chat-header__call-btn">‚òéÔ∏è</button>
        </div>

        <!-- –æ–∫–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π -->
        <div id="chat-box" class="chat-box" style="flex:1; overflow:auto; padding:10px;"></div>
      </div>

      <!-- –ø–æ–ª–µ –≤–≤–æ–¥–∞ -->
      <div class="input-container" style="display:flex; padding:10px; border-top:1px solid #ccc;">
        <button id="attach-btn" class="icon-btn">üìé</button>
        <textarea id="message" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." rows="1" style="flex:1; margin:0 10px;"></textarea>
        <button id="send-btn" class="icon-btn">‚û§</button>
        <button id="voice-btn" class="icon-btn">üé§</button>
      </div>
    </section>
  </div>

  <!-- Lightbox Overlay -->
  <div id="lightbox-overlay" class="hidden">
    <div id="lightbox-content">
      <button id="lightbox-close">‚úï</button>
      <button id="lightbox-download">‚§ì</button>
      <img id="lightbox-image" src="" alt="Preview">
    </div>
  </div>

  <!-- –û–∫–Ω–æ –∑–≤–æ–Ω–∫–∞ -->
  <div id="call-window" class="call-window hidden">
    <div class="call-header">
      <span id="call-title">–ó–≤–æ–Ω–æ–∫ —Å ...</span>
    </div>
    <div class="call-body">
      <div id="call-status">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
      <div id="call-timer">00:00</div>
      <audio id="remote-audio" autoplay></audio>
      <div class="call-controls">
        <button id="call-answer" class="action-btn">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
        <button id="call-cancel" class="action-btn cancel">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </div>
  </div>

  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ -->
  <script>
    // –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–Ω—é
    const sections = ['chats','groups','channels','games','miniapps'];
    document.querySelectorAll('.menu-tabs .tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelector('.menu-tabs .tab.active').classList.remove('active');
        tab.classList.add('active');
        const sec = tab.dataset.section;
        sections.forEach(s => {
          document.getElementById(`section-${s}`)
            .classList.toggle('active', s === sec);
        });
      });
    });
  </script>
  <script src="chat.js"></script>
</body>
</html>
