<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Игра "3 в ряд"</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            position: relative;
        }

        .scene {
            display: none;
            padding: 20px;
            text-align: center;
        }

        .scene.active {
            display: block;
        }

        h1, h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        p {
            color: #34495e;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .btn {
            background: linear-gradient(to right, #3498db, #2c3e50);
            color: white;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            border-radius: 50px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
            background: linear-gradient(to right, #2c3e50, #3498db);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .level-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .level-card {
            background: linear-gradient(135deg, #3498db, #2c3e50);
            color: white;
            padding: 20px 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .level-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
        }

        .level-card.locked {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            cursor: not-allowed;
        }

        .game-info {
            display: flex;
            justify-content: space-around;
            background: linear-gradient(to right, #2c3e50, #4a6491);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .info-item {
            text-align: center;
        }

        .info-label {
            font-size: 14px;
            opacity: 0.8;
        }

        .info-value {
            font-size: 24px;
            font-weight: bold;
        }

        #game-board {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 5px;
            margin: 0 auto;
            max-width: 500px;
            background-color: #1a2a3a;
            padding: 10px;
            border-radius: 10px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .tile {
            aspect-ratio: 1/1;
            background-color: #34495e;
            border-radius: 5px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.3);
        }

        .shape {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .circle {
            width: 70%;
            height: 70%;
            border-radius: 50%;
        }

        .square {
            width: 70%;
            height: 70%;
        }

        .triangle {
            width: 0;
            height: 0;
            border-left: 35% solid transparent;
            border-right: 35% solid transparent;
            border-bottom: 60% solid;
        }

        .diamond {
            width: 60%;
            height: 60%;
            transform: rotate(45deg);
        }

        .star {
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        }

        .hexagon {
            clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
        }

        .pentagon {
            clip-path: polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%);
        }

        .tile.selected {
            box-shadow: 0 0 0 3px #f1c40f;
            z-index: 10;
            transform: scale(0.95);
        }

        .tile.matched .shape {
            animation: matched 0.5s ease-out;
        }

        @keyframes matched {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(0); opacity: 0; }
        }

        .win-scene, .lose-scene, .about-scene {
            background: linear-gradient(135deg, #1a2a3a, #2c3e50);
            color: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }

        .scene-content {
            max-width: 500px;
            margin: 0 auto;
        }

        .highlight {
            color: #f1c40f;
            font-weight: bold;
            font-size: 1.2em;
        }

        .about-features {
            text-align: left;
            margin: 20px 0;
            padding-left: 20px;
        }

        .about-features li {
            margin-bottom: 10px;
            list-style-type: circle;
        }

        .game-title {
            font-size: 3em;
            margin: 20px 0;
            background: linear-gradient(to right, #3498db, #f1c40f, #e74c3c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 600px) {
            .btn {
                padding: 12px 20px;
                font-size: 16px;
            }
            
            .level-cards {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .game-info {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Главное меню -->
        <div id="main-menu" class="scene active">
            <h1 class="game-title">Три в ряд</h1>
            <div style="margin: 30px 0;">
                <button id="play-btn" class="btn">Играть</button>
                <button id="levels-btn" class="btn">Уровни</button>
                <button id="about-btn" class="btn">Об игре</button>
            </div>
            <p>Собери 3 или более одинаковых фигур в ряд!</p>
        </div>
        
        <!-- Выбор уровня -->
        <div id="level-select" class="scene">
            <h2>Выберите уровень</h2>
            <div class="level-cards">
                <div class="level-card" data-level="1">Уровень 1</div>
                <div class="level-card locked" data-level="2">Уровень 2</div>
                <div class="level-card locked" data-level="3">Уровень 3</div>
                <div class="level-card locked" data-level="4">Уровень 4</div>
                <div class="level-card locked" data-level="5">Уровень 5</div>
            </div>
            <button id="back-to-menu" class="btn">Назад</button>
        </div>
        
        <!-- Игровой экран -->
        <div id="game-scene" class="scene">
            <h2>Уровень <span id="level">1</span></h2>
            <div class="game-info">
                <div class="info-item">
                    <div class="info-label">Счет</div>
                    <div id="score" class="info-value">0</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Цель</div>
                    <div id="target" class="info-value">500</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Ходы</div>
                    <div id="moves" class="info-value">30</div>
                </div>
            </div>
            <div id="game-board"></div>
            <button id="menu-btn" class="btn">Меню</button>
        </div>
        
        <!-- Победа -->
        <div id="win-scene" class="scene win-scene">
            <div class="scene-content">
                <h2>Победа!</h2>
                <p>Вы прошли уровень <span id="win-level" class="highlight">1</span></p>
                <p>Ваш счет: <span id="win-score" class="highlight">0</span></p>
                <button id="next-level-btn" class="btn">Следующий уровень</button>
                <button id="win-menu-btn" class="btn">Главное меню</button>
            </div>
        </div>
        
        <!-- Поражение -->
        <div id="lose-scene" class="scene lose-scene">
            <div class="scene-content">
                <h2>Конец игры</h2>
                <p>Вы не прошли уровень <span id="lose-level" class="highlight">1</span></p>
                <p>Ваш счет: <span id="lose-score" class="highlight">0</span></p>
                <button id="retry-btn" class="btn">Повторить</button>
                <button id="lose-menu-btn" class="btn">Главное меню</button>
            </div>
        </div>
        
        <!-- Об игре -->
        <div id="about-scene" class="scene about-scene">
            <div class="scene-content">
                <h2>Об игре</h2>
                <p>Классическая игра "3 в ряд" с красочной графикой и множеством уровней.</p>
                <p>Правила просты:</p>
                <ul class="about-features">
                    <li>Найдите ряды из 3 или более одинаковых фигур</li>
                    <li>Обменивайте фигуры местами, чтобы собрать ряды</li>
                    <li>Набирайте очки и проходите уровни</li>
                    <li>Каждый уровень сложнее предыдущего</li>
                </ul>
                <button id="about-back-btn" class="btn">Назад</button>
            </div>
        </div>
    </div>

    <script>
        // Конфигурация уровней
        const levels = [
            { targetScore: 500, moves: 30, colors: 4 },
            { targetScore: 1000, moves: 25, colors: 5 },
            { targetScore: 2000, moves: 20, colors: 5 },
            { targetScore: 3000, moves: 18, colors: 6 },
            { targetScore: 5000, moves: 15, colors: 7 }
        ];

        // Элементы DOM
        const gameContainer = document.getElementById('game-container');
        const scenes = {
            mainMenu: document.getElementById('main-menu'),
            levelSelect: document.getElementById('level-select'),
            gameScene: document.getElementById('game-scene'),
            winScene: document.getElementById('win-scene'),
            loseScene: document.getElementById('lose-scene'),
            aboutScene: document.getElementById('about-scene')
        };

        // Переменные игры
        let currentLevel = 0;
        let score = 0;
        let movesLeft = 0;
        let selectedTile = null;
        let board = [];
        let isSwapping = false;
        let isProcessingMatches = false;
        let unlockedLevels = 0; // Открытые уровни
        let colorToShapeMap = []; // Соответствие цвета и формы

        // Различные фигуры и их цвета
        const shapeTypes = ['circle', 'square', 'triangle', 'diamond', 'star', 'hexagon', 'pentagon'];
        const shapeColors = [
            '#FF6B6B', // Красный
            '#4ECDC4', // Бирюзовый
            '#FFD166', // Жёлтый
            '#06D6A0', // Зелёный
            '#118AB2', // Синий
            '#073B4C', // Тёмно-синий
            '#EF476F', // Розовый
            '#FF9E6D', // Оранжевый
            '#9B5DE5', // Фиолетовый
            '#00BBF9'  // Голубой
        ];

        // Инициализация игры
        function init() {
            // Загрузка открытых уровней
            const savedLevels = localStorage.getItem('unlockedLevels');
            if (savedLevels !== null) {
                unlockedLevels = parseInt(savedLevels);
            }

            // Назначение обработчиков событий
            document.getElementById('play-btn').addEventListener('click', () => {
                showScene('levelSelect');
            });
            
            document.getElementById('levels-btn').addEventListener('click', () => {
                updateLevelSelect();
                showScene('levelSelect');
            });
            
            document.getElementById('about-btn').addEventListener('click', () => {
                showScene('aboutScene');
            });
            
            document.getElementById('back-to-menu').addEventListener('click', () => {
                showScene('mainMenu');
            });
            
            document.getElementById('about-back-btn').addEventListener('click', () => {
                showScene('mainMenu');
            });
            
            document.getElementById('menu-btn').addEventListener('click', () => {
                showScene('mainMenu');
            });
            
            document.getElementById('win-menu-btn').addEventListener('click', () => {
                showScene('mainMenu');
            });
            
            document.getElementById('lose-menu-btn').addEventListener('click', () => {
                showScene('mainMenu');
            });
            
            document.getElementById('next-level-btn').addEventListener('click', () => {
                if (currentLevel < levels.length - 1) {
                    currentLevel++;
                    startLevel(currentLevel);
                } else {
                    showScene('mainMenu');
                }
            });
            
            document.getElementById('retry-btn').addEventListener('click', () => {
                startLevel(currentLevel);
            });
            
            // Обработчики выбора уровня
            updateLevelSelect();
        }

        // Обновление экрана выбора уровня
        function updateLevelSelect() {
            const levelCards = document.querySelectorAll('.level-card');
            levelCards.forEach(card => {
                const level = parseInt(card.dataset.level) - 1;
                if (level <= unlockedLevels) {
                    card.classList.remove('locked');
                    card.onclick = () => startLevel(level);
                } else {
                    card.classList.add('locked');
                    card.onclick = null;
                }
            });
        }

        // Показать сцену
        function showScene(sceneName) {
            // Скрыть все сцены
            Object.values(scenes).forEach(scene => {
                scene.classList.remove('active');
            });
            
            // Показать выбранную сцену
            scenes[sceneName].classList.add('active');
        }

        // Начать уровень
        function startLevel(level) {
            currentLevel = level;
            score = 0;
            movesLeft = levels[level].moves;
            
            // Инициализация соответствия цветов и форм
            colorToShapeMap = [];
            for (let i = 0; i < levels[level].colors; i++) {
                colorToShapeMap[i] = shapeTypes[Math.floor(Math.random() * shapeTypes.length)];
            }
            
            // Обновление информации об уровне
            document.getElementById('score').textContent = score;
            document.getElementById('target').textContent = levels[level].targetScore;
            document.getElementById('moves').textContent = movesLeft;
            document.getElementById('level').textContent = level + 1;
            
            // Создание игрового поля
            createBoard();
            
            // Показать игровую сцену
            showScene('gameScene');
        }

        // Создание игрового поля без начальных совпадений
        function createBoard() {
            const gameBoard = document.getElementById('game-board');
            gameBoard.innerHTML = '';
            board = [];
            
            const size = 8; // 8x8 сетка
            const colors = levels[currentLevel].colors;
            
            // Создание плиток без совпадений
            for (let row = 0; row < size; row++) {
                board[row] = [];
                for (let col = 0; col < size; col++) {
                    const tile = document.createElement('div');
                    tile.className = 'tile';
                    tile.dataset.row = row;
                    tile.dataset.col = col;
                    
                    // Добавление фигуры
                    const shape = document.createElement('div');
                    
                    // Выбор цвета с проверкой на совпадения
                    let colorIndex;
                    let attempts = 0;
                    do {
                        colorIndex = Math.floor(Math.random() * colors);
                        attempts++;
                        
                        // Проверка горизонтальных совпадений
                        if (col >= 2 && 
                            board[row][col-1] && board[row][col-1].color === colorIndex && 
                            board[row][col-2] && board[row][col-2].color === colorIndex) {
                            continue;
                        }
                        
                        // Проверка вертикальных совпадений
                        if (row >= 2 && 
                            board[row-1][col] && board[row-1][col].color === colorIndex && 
                            board[row-2][col] && board[row-2][col].color === colorIndex) {
                            continue;
                        }
                        
                        break;
                        
                    } while (attempts < 100); // Защита от бесконечного цикла
                    
                    const shapeType = colorToShapeMap[colorIndex];
                    shape.className = `shape ${shapeType}`;
                    shape.style.backgroundColor = shapeColors[colorIndex];
                    tile.appendChild(shape);
                    gameBoard.appendChild(tile);
                    
                    board[row][col] = {
                        element: tile,
                        color: colorIndex,
                        shape: shape,
                        shapeType: shapeType
                    };
                    
                    // Обработчик клика
                    tile.addEventListener('click', () => handleTileClick(row, col));
                }
            }
        }

        // Обработка клика по плитке
        function handleTileClick(row, col) {
            if (isSwapping || isProcessingMatches) return;
            
            const tile = board[row][col];
            
            // Если плитка уже выбрана
            if (selectedTile === tile) {
                tile.element.classList.remove('selected');
                selectedTile = null;
                return;
            }
            
            // Если это первая выбранная плитка
            if (!selectedTile) {
                tile.element.classList.add('selected');
                selectedTile = tile;
                return;
            }
            
            // Проверка, соседние ли плитки
            const selectedRow = parseInt(selectedTile.element.dataset.row);
            const selectedCol = parseInt(selectedTile.element.dataset.col);
            
            if (
                (Math.abs(selectedRow - row) === 1 && selectedCol === col) ||
                (Math.abs(selectedCol - col) === 1 && selectedRow === row)
            ) {
                // Поменять плитки местами
                swapTiles(selectedRow, selectedCol, row, col);
            } else {
                // Снять выделение с предыдущей плитки
                selectedTile.element.classList.remove('selected');
                // Выбрать новую плитку
                tile.element.classList.add('selected');
                selectedTile = tile;
            }
        }

        // Поменять плитки местами
        function swapTiles(row1, col1, row2, col2) {
            isSwapping = true;
            
            const tile1 = board[row1][col1];
            const tile2 = board[row2][col2];
            
            // Визуальная анимация обмена
            tile1.element.style.transition = 'transform 0.3s ease';
            tile2.element.style.transition = 'transform 0.3s ease';
            
            tile1.element.style.transform = `translate(${(col2 - col1) * 100}%, ${(row2 - row1) * 100}%)`;
            tile2.element.style.transform = `translate(${(col1 - col2) * 100}%, ${(row1 - row2) * 100}%)`;
            
            // Обновить состояние плиток в массиве
            setTimeout(() => {
                // Сбросить трансформации
                tile1.element.style.transform = '';
                tile2.element.style.transform = '';
                
                // Обновить данные в массиве
                board[row1][col1] = tile2;
                board[row2][col2] = tile1;
                
                // Обновить атрибуты данных
                tile1.element.dataset.row = row2;
                tile1.element.dataset.col = col2;
                tile2.element.dataset.row = row1;
                tile2.element.dataset.col = col1;
                
                // Снять выделение
                tile1.element.classList.remove('selected');
                tile2.element.classList.remove('selected');
                selectedTile = null;
                
                // Проверить совпадения после обмена
                setTimeout(() => {
                    const hadMatches = processMatches();
                    if (!hadMatches) {
                        // Если совпадений не было, вернуть фигурки на место
                        swapTiles(row2, col2, row1, col1);
                    } else {
                        // Ход засчитан
                        movesLeft--;
                        document.getElementById('moves').textContent = movesLeft;
                    }
                    isSwapping = false;
                }, 300);
            }, 300);
        }

        // Обработка совпадений
        function processMatches() {
            const matches = findMatches();
            
            if (matches.length > 0) {
                isProcessingMatches = true;
                // Удалить совпадающие плитки
                removeMatches(matches);
                
                // Обновить счет
                updateScore(matches);
                
                // Переместить плитки вниз
                setTimeout(() => {
                    dropTiles();
                    
                    // Заполнить пустые места новыми фигурами сверху
                    setTimeout(() => {
                        fillEmptySpaces();
                        
                        // Проверить новые совпадения
                        setTimeout(() => {
                            processMatches();
                        }, 500);
                    }, 500);
                }, 500);
                return true;
            } else {
                // Проверить условия завершения уровня
                checkLevelCompletion();
                isProcessingMatches = false;
                return false;
            }
        }

        // Найти совпадения
        function findMatches() {
            const matches = [];
            const size = 8;
            
            // Проверка горизонтальных совпадений
            for (let row = 0; row < size; row++) {
                for (let col = 0; col < size - 2; col++) {
                    if (!board[row][col] || !board[row][col+1] || !board[row][col+2]) continue;
                    
                    const color = board[row][col].color;
                    if (color !== null &&
                        color === board[row][col + 1].color &&
                        color === board[row][col + 2].color) {
                        
                        let matchLength = 3;
                        while (col + matchLength < size && 
                               board[row][col + matchLength] && 
                               board[row][col + matchLength].color === color) {
                            matchLength++;
                        }
                        
                        for (let i = 0; i < matchLength; i++) {
                            if (!matches.includes(board[row][col + i])) {
                                matches.push(board[row][col + i]);
                            }
                        }
                    }
                }
            }
            
            // Проверка вертикальных совпадений
            for (let col = 0; col < size; col++) {
                for (let row = 0; row < size - 2; row++) {
                    if (!board[row][col] || !board[row+1][col] || !board[row+2][col]) continue;
                    
                    const color = board[row][col].color;
                    if (color !== null &&
                        color === board[row + 1][col].color &&
                        color === board[row + 2][col].color) {
                        
                        let matchLength = 3;
                        while (row + matchLength < size && 
                               board[row + matchLength][col] && 
                               board[row + matchLength][col].color === color) {
                            matchLength++;
                        }
                        
                        for (let i = 0; i < matchLength; i++) {
                            if (!matches.includes(board[row + i][col])) {
                                matches.push(board[row + i][col]);
                            }
                        }
                    }
                }
            }
            
            return matches;
        }

        // Удалить совпадающие плитки
        function removeMatches(matches) {
            matches.forEach(tile => {
                tile.element.classList.add('matched');
                tile.color = null;
                
                // Удалить фигуру после анимации
                setTimeout(() => {
                    if (tile.shape) {
                        tile.shape.remove();
                        tile.shape = null;
                    }
                }, 300);
            });
        }

        // Обновить счет
        function updateScore(matches) {
            const points = matches.length * 10;
            score += points;
            document.getElementById('score').textContent = score;
        }

        // Переместить плитки вниз
        function dropTiles() {
            const size = 8;
            
            for (let col = 0; col < size; col++) {
                let emptySpaces = 0;
                
                // Снизу вверх
                for (let row = size - 1; row >= 0; row--) {
                    const tile = board[row][col];
                    
                    if (!tile) continue;
                    
                    if (tile.color === null) {
                        emptySpaces++;
                    } else if (emptySpaces > 0) {
                        // Переместить плитку вниз
                        const newRow = row + emptySpaces;
                        board[newRow][col] = tile;
                        board[row][col] = { color: null, element: tile.element, shape: null };
                        
                        // Обновить атрибуты данных
                        tile.element.dataset.row = newRow;
                        tile.element.dataset.col = col;
                        
                        // Анимация перемещения
                        tile.element.style.transition = 'transform 0.5s ease';
                        tile.element.style.transform = `translateY(${emptySpaces * 100}%)`;
                        
                        setTimeout(() => {
                            tile.element.style.transform = '';
                        }, 500);
                    }
                }
            }
        }

        // Заполнить пустые места с анимацией падения сверху
        function fillEmptySpaces() {
            const size = 8;
            const colors = levels[currentLevel].colors;
            
            for (let col = 0; col < size; col++) {
                for (let row = 0; row < size; row++) {
                    if (board[row][col] && board[row][col].color === null) {
                        const tile = board[row][col];
                        
                        // Удалить все дочерние элементы плитки
                        while (tile.element.firstChild) {
                            tile.element.removeChild(tile.element.firstChild);
                        }
                        
                        const colorIndex = Math.floor(Math.random() * colors);
                        const shapeType = colorToShapeMap[colorIndex];
                        
                        // Создать новую фигуру
                        const shape = document.createElement('div');
                        shape.className = `shape ${shapeType}`;
                        shape.style.backgroundColor = shapeColors[colorIndex];
                        shape.style.transform = 'translateY(-1000%)'; // Начальная позиция сверху
                        tile.element.appendChild(shape);
                        
                        // Обновить данные плитки
                        tile.color = colorIndex;
                        tile.shape = shape;
                        tile.shapeType = shapeType;
                        
                        // Анимация падения
                        setTimeout(() => {
                            shape.style.transition = 'transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
                            shape.style.transform = 'translateY(0)';
                        }, 100);
                    }
                }
            }
        }

        // Проверить завершение уровня
        function checkLevelCompletion() {
            if (movesLeft <= 0) {
                if (score >= levels[currentLevel].targetScore) {
                    // Победа - открываем следующий уровень
                    if (currentLevel >= unlockedLevels) {
                        unlockedLevels = currentLevel + 1;
                        localStorage.setItem('unlockedLevels', unlockedLevels);
                    }
                    
                    document.getElementById('win-level').textContent = currentLevel + 1;
                    document.getElementById('win-score').textContent = score;
                    showScene('winScene');
                } else {
                    // Поражение
                    document.getElementById('lose-level').textContent = currentLevel + 1;
                    document.getElementById('lose-score').textContent = score;
                    showScene('loseScene');
                }
            }
        }

        // Запуск игры при загрузке страницы
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
